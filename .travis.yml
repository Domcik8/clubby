language: java
jdk:
- oraclejdk8

sudo: false

before_script:
- cd src/main/webapp # jump to package.json
- npm install
- npm run build
- cd ../../.. # jump back to root

script:
- mvn package -Popenshift

before_deploy:
- sed -i '/bower_components\//d' .gitignore
- git config --global user.email "builds@travis-ci.com"
- git config --global user.name "Travis CI"
- git checkout $TRAVIS_BRANCH
- git add --all
- git commit -am "Travis build $TRAVIS_BUILD_NUMBER"

deploy:
  skip_cleanup: true
  provider: openshift
  user: $OPENSHIFT_USERNAME
  password: $OPENSHIFT_PASSWORD
  app: clubby
  domain: teamasdasd
  on:
    repo: Tony-Mc/asdasd
    branch: master
