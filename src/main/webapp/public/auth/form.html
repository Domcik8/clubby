<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-4.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-social/4.12.0/bootstrap-social.css">

    <title>Clubby Form</title>
</head>
<body>
<style th:if="${isPhoto} == true" type="text/css">
    .uploadinput {
        position: relative;
        overflow: hidden;
        margin: 10px;
    }

    .uploadinput input {
        position: absolute;
        top: 0;
        right: 0;
        margin: 0;
        padding: 0;
        font-size: 20px;
        cursor: pointer;
        opacity: 0;
        filter: alpha(opacity=0);
    }
</style>
<script src="/node_modules/jquery/dist/jquery.min.js"></script>
<script src="/node_modules/bootstrap-validator/dist/validator.js"></script>
<script th:if="${isPhoto}" src="/node_modules/blueimp-file-upload/js/vendor/jquery.ui.widget.js"
        type="text/javascript"></script>
<script th:if="${isPhoto}" src="/node_modules/blueimp-file-upload/js/jquery.iframe-transport.js"
        type="text/javascript"></script>
<script th:if="${isPhoto} " src="/node_modules/blueimp-file-upload/js/jquery.fileupload.js"
        type="text/javascript"></script>
<script th:if="${isPhoto}"
        src="/node_modules/cloudinary-jquery-file-upload/cloudinary-jquery-file-upload.min.js"></script>

<div th:if="${registred} == null" style="margin-top: 90px;">
    <div class="panel panel-default">
        <div class="panel-heading">
            <h3 class="panel-title">Please fill this form </h3>
        </div>
        <div class="panel-body">
            <form role="form" data-toggle="validator" method="post">
                <div th:if="${isPhoneNumber}" class="col-xs-6 col-sm-6 col-md-6">
                    <div class="form-group">
                        <input th:value="${phoneNumber}" type="text" name="phoneNumber" id="phoneNumber"
                               class="form-control input-sm" placeholder="Phone number" required>
                        <div class="help-block with-errors"></div>
                    </div>
                </div>
                <div th:if="${isAddress}" class="col-xs-6 col-sm-6 col-md-6">
                    <div class="form-group">
                        <input th:value="${address}" type="text" name="address" id="address"
                               class="form-control input-sm" placeholder="Your address" required>
                        <div class="help-block with-errors"></div>
                    </div>
                </div>
                <div th:if="${isAbout}" class="col-xs-6 col-sm-6 col-md-6">
                    <div class="form-group">
                        <input th:value="${address}" type="text" name="about" id="about" class="form-control input-sm"
                               placeholder="Who are you?">
                    </div>
                </div>
                <div th:if="${isBirthDate}" class="col-xs-6 col-sm-6 col-md-6">
                    <div class="form-group">
                        <input th:value="${address}" type="date" name="birthdate" id="birthdate"
                               class="form-control input-sm">
                    </div>
                </div>
                <div class="row">
                    <div th:if="${isPhoto}" class="col-xs-6 col-sm-6 col-md-6">
                        <input value="" type="hidden" name="photo" id="photo" class="form-control input-sm">
                        <div class="uploadinput btn btn-default">
                            <span>Add your photo</span>
                        </div>
                    </div>
                    <div class="thumbnail col-xs-6 col-sm-6 col-md-6" style="border: none"></div>
                </div>
                <input type="submit" value="Save" class="btn btn-info btn-block">

            </form>
        </div>
    </div>
</div>

<script>
    $.cloudinary.config({cloud_name: 'teamasdasd'})
    $("div[class^='uploadinput']").append($.cloudinary.unsigned_upload_tag("syjxlwur"))
            .bind('cloudinarydone', function (e, data) {
                        $("div[class^='thumbnail']").append($.cloudinary.image(data.result.public_id,
                                {
                                    width: 100, height: 100,
                                    crop: 'thumb', gravity: 'face', radius: 'max'
                                }))
                        $('#photo').attr('value', data.result.url);
                    }
            )

    function onEmailKeyDown(e) {
        $('#email').off('keydown', onEmailKeyDown);
        $('#duplicateEmailError').remove();
    }
    $('#email').on('keydown', onEmailKeyDown);

    function onUserNameKeyDown(e) {
        $('#userName').off('keydown', onUserNameKeyDown);
        $('#duplicateUserNameError').remove();
    }
    $('#userName').on('keydown', onUserNameKeyDown);
</script>

</body>
</html>